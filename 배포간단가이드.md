# π“‹ λ°°ν¬ μ „ ν•„μ μ²΄ν¬λ¦¬μ¤νΈ (κ°„λ‹¨ λ²„μ „)

## π”΄ λ°λ“μ‹ ν•΄μ•Ό ν•  κ²ƒ

### 1. ν™κ²½ λ³€μ μ„¤μ •

```bash
# env.production.exampleμ„ .envλ΅ λ³µμ‚¬
cp env.production.example .env

# .env νμΌμ„ νΈμ§‘ν•μ—¬ μ‹¤μ  κ°’ μ…λ ¥
nano .env  # λλ” vim .env
```

**ν•„μλ΅ λ³€κ²½ν•΄μ•Ό ν•  κ°’:**
- β… `OPENAI_API_KEY` - μ‹¤μ  OpenAI API ν‚¤
- β… `MOCK_MODE=false` - ν”„λ΅λ•μ…μ—μ„λ” false!
- β… `REDIS_PASSWORD` - κ°•λ ¥ν• λΉ„λ°€λ²νΈ μ„¤μ •
- β… `REDIS_URL` - Redis λΉ„λ°€λ²νΈ ν¬ν•¨ν• URL

### 2. docker-compose.yml μμ •

**ν”„λ΅λ•μ…μ—μ„λ” λ‹¤μ μ¤„μ„ μ κ±°ν•κ±°λ‚ μμ •:**
```yaml
# μ΄ μ¤„μ„ μ κ±°ν•κ±°λ‚ falseλ΅ λ³€κ²½
- MOCK_MODE=true  # β ν”„λ΅λ•μ…μ—μ„λ” μ κ±°!
```

**λλ” ν”„λ΅λ•μ… μ „μ© νμΌ μ‚¬μ©:**
```bash
docker-compose -f docker-compose.prod.yml up -d
```

### 3. Redis λ³΄μ• μ„¤μ •

`docker-compose.yml`μ Redis μ„¤μ •μ— λΉ„λ°€λ²νΈ μ¶”κ°€:
```yaml
redis:
  command: redis-server --requirepass ${REDIS_PASSWORD}
```

### 4. .gitignore ν™•μΈ

`.env` νμΌμ΄ Gitμ— μ»¤λ°‹λμ§€ μ•λ„λ΅ ν™•μΈ:
```bash
git check-ignore .env
# μ•„λ¬΄κ²ƒλ„ μ¶λ ¥λμ§€ μ•μΌλ©΄ .gitignoreκ°€ μ‘λ™ μ¤‘
```

---

## β… λΉ λ¥Έ κ²€μ¦ μ²΄ν¬λ¦¬μ¤νΈ

λ°°ν¬ μ „μ— λ‹¤μμ„ ν™•μΈν•μ„Έμ”:

- [ ] `.env` νμΌ μƒμ„± λ° μ‹¤μ  κ°’ μ…λ ¥
- [ ] `MOCK_MODE=false` μ„¤μ •
- [ ] OpenAI API ν‚¤ μ ν¨μ„± ν™•μΈ
- [ ] Redis λΉ„λ°€λ²νΈ μ„¤μ •
- [ ] `docker-compose.yml`μ—μ„ `MOCK_MODE=true` μ κ±°
- [ ] `.env` νμΌμ΄ `.gitignore`μ— ν¬ν•¨λμ–΄ μλ”μ§€ ν™•μΈ
- [ ] λ²΅ν„° νμΌ(`vectors.json`) μ΅΄μ¬ ν™•μΈ
- [ ] Health check μ—”λ“ν¬μΈνΈ μ‘λ™ ν™•μΈ (`/health`)

---

## π€ λ°°ν¬ λ…λ Ήμ–΄

```bash
# 1. ν™κ²½ λ³€μ μ„¤μ •
cp env.production.example .env
# .env νμΌ νΈμ§‘

# 2. Docker Composeλ΅ λ°°ν¬
docker-compose -f docker-compose.prod.yml up -d

# 3. λ΅κ·Έ ν™•μΈ
docker-compose logs -f server

# 4. Health check
curl http://localhost:3000/health

# 5. WebSocket ν…μ¤νΈ
node test_websocket.js
```

---

## π” λ¬Έμ  ν•΄κ²°

**μ„λ²„κ°€ μ‹μ‘λμ§€ μ•μ„ λ•:**
```bash
# λ΅κ·Έ ν™•μΈ
docker-compose logs server

# ν™κ²½ λ³€μ ν™•μΈ
docker-compose exec server env | grep -E "OPENAI|REDIS|MOCK"
```

**Redis μ—°κ²° μ‹¤ν¨:**
- Redis λΉ„λ°€λ²νΈκ°€ `.env`μ— μ„¤μ •λμ–΄ μλ”μ§€ ν™•μΈ
- `REDIS_URL`μ— λΉ„λ°€λ²νΈκ°€ ν¬ν•¨λμ–΄ μλ”μ§€ ν™•μΈ

**WebSocket μ—°κ²° μ‹¤ν¨:**
- ν¬νΈκ°€ μ—΄λ ¤μλ”μ§€ ν™•μΈ: `netstat -tlnp | grep 3000`
- λ°©ν™”λ²½ μ„¤μ • ν™•μΈ

---

## π“ λ” μμ„Έν• λ‚΄μ©μ€

- **λ°°ν¬μ²΄ν¬λ¦¬μ¤νΈ.md** - μƒμ„Έν• λ°°ν¬ κ°€μ΄λ“
- **env.production.example** - ν™κ²½ λ³€μ ν…ν”λ¦Ώ

